<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout Page</title>
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./assets/devchallenges.png"
    />
    <link rel="stylesheet" href="./css/styles.min.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
  </head>
  <body>
    <main>
      <h1>Checkout</h1>
      <div class="form-container">
        <form id="form-1">
          <h2>Contact information</h2>
          <div class="flex-column">
            <label for="email">E-mail</label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="Enter your email..."
            />
            <span class="material-symbols-rounded"> mail </span>
          </div>
          <div class="flex-column">
            <label for="phone">Phone</label>
            <input
              type="tel"
              name="phone"
              id="phone"
              placeholder="Enter your phone..."
            />
            <span class="material-symbols-rounded"> call </span>
          </div>
          <h3>Shipping address</h3>
          <div class="flex-column">
            <label for="name">Full name</label>
            <input
              type="text"
              name="name"
              id="name"
              placeholder="Enter your name.."
            />
            <span class="material-symbols-rounded"> account_circle </span>
          </div>
          <div class="flex-column">
            <label for="address">Address</label>
            <input
              type="text"
              name="address"
              id="address"
              placeholder="Your address.."
            />
            <span class="material-symbols-rounded"> home </span>
          </div>
          <div class="flex-column">
            <label for="city">City</label>
            <input
              type="text"
              name="city"
              id="city"
              placeholder="Your city.."
            />
            <span class="material-symbols-rounded"> location_city </span>
          </div>
          <div class="grid-1">
            <div class="flex-column">
              <label for="country">Country</label>
              <select name="country" id="country">
                <option value="India">India</option>
                <option value="United States">United States</option>
                <option value="United Kingdom">United Kingdom</option>
                <option value="Netherlands">Netherlands</option>
                <option value="Bangladesh">Bangladesh</option>
                <option value="Sri Lanka">Sri Lanka</option>
                <option value="Canada">Canada</option>
                <option value="New Zealand">New Zealand</option>
                <option value="Australia">Australia</option>
                <option value="South Africa">South Africa</option>
                <option value="Egypt">Egypt</option>
                <option value="Nepal">Nepal</option>
                <option value="Bhutan">Bhutan</option>
              </select>
              <span class="material-symbols-rounded"> public </span>
            </div>
            <div class="flex-column">
              <label for="postal">Postal code</label>
              <input
                type="text"
                name="postal"
                id="postal"
                placeholder="Your postal code.."
              />
              <span class="material-symbols-rounded"> markunread_mailbox </span>
            </div>
          </div>
          <div class="flex-row-1">
            <input type="checkbox" name="save" id="save" />
            <label for="save">Save this information for next time</label>
          </div>
          <div id="error"></div>
          <div id="success"></div>
          <button type="submit">Continue</button>
        </form>
      </div>
      <form id="form-2">
        <div class="item">
          <img src="./assets/photo1.png" alt="Bag" />
          <div class="item__details">
            <p class="item__name">Vintage Backbag</p>
            <div class="item__price">
              <p class="item__cost">$54.99</p>
              <p class="item__old">$94.99</p>
            </div>
            <div class="number">
              <button class="material-symbols-rounded minus" type="submit">
                remove
              </button>
              <input type="text" name="count" id="count1" value="1" />
              <button class="material-symbols-rounded plus" type="submit">
                add
              </button>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="./assets/photo2.png" alt="Levi Shoes" />
          <div class="item__details">
            <p class="item__name">Levi Shoes</p>
            <div class="item__price">
              <p class="item__cost">$74.99</p>
              <p class="item__old">$124.99</p>
            </div>
            <div class="number">
              <button class="material-symbols-rounded minus" type="submit">
                remove
              </button>
              <input type="text" name="count" id="count2" value="1" />
              <button class="material-symbols-rounded plus" type="submit">
                add
              </button>
            </div>
          </div>
        </div>
        <div class="card__footer">
          <div>
            <p class="footer__title">Shipping</p>
            <p class="footer__cost">$19</p>
          </div>
          <div>
            <p class="footer__title">Total</p>
            <p class="footer__cost" id="total">$148.98</p>
          </div>
        </div>
      </form>
    </main>
    <script>
      const plus = document.querySelectorAll(".plus");
      const minus = document.querySelectorAll(".minus");
      const input = document.querySelectorAll(".number input");
      const total = document.getElementById("total");
      const form1 = document.getElementById("form-1");
      const form2 = document.getElementById("form-2");
      const email = document.getElementById("email");
      const phone = document.getElementById("phone");
      const name = document.getElementById("name");
      const address = document.getElementById("address");
      const city = document.getElementById("city");
      const country = document.getElementById("country");
      const postal = document.getElementById("postal");
      const error = document.getElementById("error");
      const success = document.getElementById("success");
      for (let i = 0; i < plus.length; i++) {
        plus[i].addEventListener("click", () => {
          input[i].setAttribute("value", parseInt(input[i].value) + 1);
        });
        minus[i].addEventListener("click", (e) => {
          input[i].setAttribute(
            "value",
            input[i].value <= 1 ? 1 : input[i].value - 1
          );
        });
      }
      const isValidPhone = (phone) => {
        const re =
          /^(\+\d{1,2}\s?)?1?\-?\.?\s?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/;
        return re.test(String(phone));
      };

      const isValidEmail = (email) => {
        const re =
          /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email));
      };
      form1.addEventListener("submit", (e) => {
        e.preventDefault();
        let messages = [];
        if (!isValidEmail(email.value)) {
          messages.push("Please enter a valid email");
        }
        if (!isValidPhone(phone.value)) {
          messages.push("Please enter a valid phone number");
        }
        if (name.value === "" || name.value == null) {
          messages.push("Please enter your name");
        }
        if (address.value === "") {
          messages.push("Please enter your address");
        }
        if (city.value === "") {
          messages.push("Please enter your city");
        }
        if (country.value === "") {
          messages.push("Please select your country");
        }
        if (postal.value === "") {
          messages.push("Please enter your postal code");
        }
        console.log(messages);
        if (messages.length > 0) {
          e.preventDefault();
          error.innerText = messages.join(", ");
        } else {
          error.innerText = "";
          success.innerText = "Form submitted successfully.";
        }
      });
      form2.addEventListener("submit", (e) => {
        event.preventDefault();
        let totalCost = (
          parseInt(input[0].value) * 54.99 +
          parseInt(input[1].value) * 74.99 +
          19
        ).toFixed(2);
        total.innerText = "$" + totalCost;
      });
    </script>
  </body>
</html>
